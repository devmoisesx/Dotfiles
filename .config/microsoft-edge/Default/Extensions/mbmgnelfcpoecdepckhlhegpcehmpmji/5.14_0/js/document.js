(()=>{"use strict";var e={907:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.YT_DOMAINS=void 0,t.YT_DOMAINS=["m.youtube.com","www.youtube.com","www.youtube-nocookie.com","music.youtube.com","www.youtubekids.com","tv.youtube.com"]},148:function(e,t){var n=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function l(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}d((i=i.apply(e,t||[])).next())}))};function i(e,t=!1){var n,i,o;if(!e)return!1;if("VIDEO"===e.tagName&&(e.classList.contains("html5-main-video")||"player"===e.id||"player_html5_api"===e.id)&&1===[...document.querySelectorAll("video")].filter((e=>e.duration)).length&&e.duration)return!0;if(0===e.offsetHeight||0===e.offsetWidth&&!t)return!1;const r=null==e?void 0:e.getBoundingClientRect(),a=document.elementFromPoint(r.left+r.width/2,r.top+r.height/2)||document.elementFromPoint(r.left,r.top);return!a&&"movie_player"===e.id&&r.top<0||!!(a===e||a&&e.contains(a)||a&&a.contains(e))||"VIDEO"===e.tagName&&(!!(null===(n=null==a?void 0:a.closest(".html5-video-player"))||void 0===n?void 0:n.contains(e))||!!(null===(o=null===(i=null==e?void 0:e.closest("#inline-preview-player"))||void 0===i?void 0:i.classList)||void 0===o?void 0:o.contains("playing-mode")))}function o(e,t=!1,n=!0){var o,r;return i(e,t)||n&&!!e&&(i(e.parentElement,t)||i(null!==(r=null===(o=e.parentElement)||void 0===o?void 0:o.parentElement)&&void 0!==r?r:null,t))}function r(e,t=!1,n=!1){return a(e,t,n)}function a(e,t=!1,n=!1,i){for(const r of e){const e=i?i(r):r;if(e&&o(e,t,n))return e}return null}function l(e,t){for(const n of e){const e=document.querySelector(n);if(e&&t(e))return e}return null}Object.defineProperty(t,"__esModule",{value:!0}),t.getElement=t.waitForElement=t.findNonEmptyElement=t.findPredicatedElement=t.findValidElement=t.findValidElementFromSelector=t.isVisibleOrParent=t.isVisible=void 0,t.isVisible=i,t.isVisibleOrParent=o,t.findValidElementFromSelector=function(e,t=!1,n=!1){return a(e,t,n,(e=>document.querySelector(e)))},t.findValidElement=r,t.findPredicatedElement=l,t.findNonEmptyElement=function(e){return l(e,(e=>{var t,n;return(null!==(n=null===(t=e.textContent)||void 0===t?void 0:t.trim())&&void 0!==n?n:"").length>0}))};let d=!1,s=null,u=[];function c(){if(!s){const e=e=>{var t;const n=[];for(const i of u){const{selector:o,visibleCheck:a,ignoreWidth:l,checkParent:d,callbacks:s}=i;let u=!0;if(e){let t=!1;for(const n of e)if("childList"===n.type&&n.addedNodes.length>0){if(n.target instanceof HTMLElement&&(n.target.matches(o)||n.target.querySelector(o))){t=!0;break}for(const e of n.addedNodes)if(e instanceof HTMLElement&&(e.matches(o)||e.querySelector(o))){t=!0;break}if(t)break}t||(u=!1)}const c=u?document.querySelectorAll(o):i.elements;if(c&&c.length>0){i.elements=c;const e=a?r(c,l,d):c[0];if(e){if(null===(t=chrome.runtime)||void 0===t?void 0:t.id)for(const t of s)t(e);n.push(o)}}}u=u.filter((e=>!n.includes(e.selector))),0===u.length&&(null==s||s.disconnect(),s=null,d=!1)};e(),u.length>0&&(s=new MutationObserver(e),s.observe(document.documentElement,{childList:!0,subtree:!0}))}}function m(e,t,n=!1,i=!1){return t?r(document.querySelectorAll(e),n,i):document.querySelector(e)}t.waitForElement=function(e,t=!1,i=!1,o=!1){return n(this,void 0,void 0,(function*(){return yield new Promise((n=>{const r=m(e,t,i,o);if(r)return void n(r);const a=u.find((n=>n.selector===e&&n.visibleCheck===t));a?a.callbacks.push(n):u.push({selector:e,visibleCheck:t,ignoreWidth:i,checkParent:o,callbacks:[n]}),d||(d=!0,document.body?c():window.addEventListener("DOMContentLoaded",(()=>{c()})))}))}))},t.getElement=m},860:function(e,t,n){var i=this&&this.__awaiter||function(e,t,n,i){return new(n||(n=Promise))((function(o,r){function a(e){try{d(i.next(e))}catch(e){r(e)}}function l(e){try{d(i.throw(e))}catch(e){r(e)}}function d(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,l)}d((i=i.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.init=void 0;const o=n(291),r=n(303),a=n(907),l=n(395),d=n(705),s=n(445),u=n(148);let c,m="",v=!1,f=!1;const y=(0,l.getThumbnailElementsToListenFor)(),p=["/youtubei/v1/search","/youtubei/v1/guide","/youtubei/v1/browse","/youtubei/v1/next","/youtubei/v1/player"],h=["videoDetails","videoPrimaryInfoRenderer","videoSecondaryInfoRenderer","currentVideoEndpoint"],w=e=>{window.postMessage(Object.assign({source:"sponsorblock"},e),"/")};function b(e){var t,n;const i=c;if("ytu.app.lib.player.interaction-event"===e.type){if(!document.querySelector("#movie_player"))return;c=document.querySelector("#movie_player"),null===(t=c.querySelector("video"))||void 0===t||t.addEventListener("durationchange",T),null===(n=c.querySelector("video"))||void 0===n||n.addEventListener("loadstart",T)}else c=document.getElementById("movie_player");T(),i||(c.addEventListener("onAdStart",(()=>w({type:"ad",playing:!0}))),c.addEventListener("onAdFinish",(()=>w({type:"ad",playing:!1}))))}function g(e){const t=e.detail.pageType;if(t){const n={type:"navigation",pageType:t,videoID:null};if("shorts"===t||"watch"===t){const i=e.detail.endpoint;if(!i)return null;n.videoID=("shorts"===t?i.reelWatchEndpoint:i.watchEndpoint).videoId}return n}return null}function E(e){const t=g(e);t&&w(t)}function S(e){var t,n,i,o,r;T();const a=null===(r=null===(o=null===(i=null!==(n=null===(t=e.detail)||void 0===t?void 0:t.data)&&void 0!==n?n:e.detail)||void 0===i?void 0:i.response)||void 0===o?void 0:o.playerResponse)||void 0===r?void 0:r.videoDetails;if(a)w(Object.assign({channelID:a.channelId,channelTitle:a.author},g(e)));else{const t=g(e);t&&w(t)}}function T(){if(!c)return;const e=c.getVideoData(),t=c.isInline();e&&(e.video_id!==m||f!==e.isLive||v!==t||t)&&(m=e.video_id,v=t,f=e.isLive,w({type:"data",videoID:e.video_id,isLive:e.isLive,isPremiere:e.isPremiere,isInline:t}))}function L(e){w({type:"videoIDsLoaded",videoIDs:Array.from(I(e))})}function I(e){const t=new Set;for(const n in e)"videoId"===n?t.add(e[n]):"object"!=typeof e[n]||h.includes(n)||I(e[n]).forEach((e=>t.add(e)));return t}function k(e){var t,n,i,o,r,a,l,d;if(null===(t=e.data)||void 0===t?void 0:t.source)if("dearrow-media-session"===(null===(n=e.data)||void 0===n?void 0:n.source))(0,s.setMediaSessionInfo)(e.data.data);else if("dearrow-reset-media-session-thumbnail"===(null===(i=e.data)||void 0===i?void 0:i.source))(0,s.resetMediaSessionThumbnail)();else if("sb-reset-media-session-link"===(null===(o=e.data)||void 0===o?void 0:o.source))(0,s.resetLastArtworkSrc)();else if("sb-verify-time"===(null===(r=e.data)||void 0===r?void 0:r.source)){const t=[...document.querySelectorAll("video")].filter((e=>(0,u.isVisible)(e)))[0];c&&(null===(a=e.data)||void 0===a?void 0:a.rawTime)===(null==t?void 0:t.currentTime)&&Math.abs(c.getCurrentTime()-(null===(l=e.data)||void 0===l?void 0:l.time))>.1&&2===c.getPlayerState()&&w({type:"currentTimeWrong",playerTime:c.getCurrentTime(),expectedTime:null===(d=e.data)||void 0===d?void 0:d.time})}}const P={browserFetch:null,browserPush:null,customElementDefine:null,waitingInterval:null};let M=!1,_=null;function O(){var e;document.removeEventListener("yt-player-updated",b),document.removeEventListener("yt-navigate-start",E),document.removeEventListener("yt-navigate-finish",S),"tv.youtube.com"===document.location.host&&(document.removeEventListener("yt-navigate",S),document.removeEventListener("ytu.app.lib.player.interaction-event",b)),(0,d.onMobile)()&&window.removeEventListener("state-navigateend",S),P.browserFetch&&(window.fetch=P.browserFetch),P.browserPush&&(window.Array.prototype.push=P.browserPush),P.customElementDefine&&(window.customElements.define=P.customElementDefine),P.waitingInterval&&clearInterval(P.waitingInterval),window.removeEventListener("message",k),window.teardownCB=null,M=!0,null===(e=null==_?void 0:_.disconnect)||void 0===e||e.call(_)}function C(){_&&_.disconnect(),_=new MutationObserver((e=>{for(const t of e)for(const e of t.addedNodes)if(e instanceof HTMLElement)for(const t of y)if(e.tagName.toLowerCase()===t||e.querySelector(t))return void w({type:"newElement",name:t})})),_.observe(document.documentElement,{childList:!0,subtree:!0});for(const e of y)document.querySelector(e)&&w({type:"newElement",name:e})}t.init=function(){var e,t,n,l;const s="true"===(null===(t=null===(e=document.querySelector("#sponsorblock-document-script"))||void 0===e?void 0:e.getAttribute)||void 0===t?void 0:t.call(e,"teardown")),u=window.versionCB&&(!window.versionCB||(0,o.versionHigher)(r.version,window.versionCB));if(s||u)null===(n=window.teardownCB)||void 0===n||n.call(window);else if(window.versionCB&&!(0,o.versionHigher)(r.version,window.versionCB))return;if(window.versionCB=r.version,window.teardownCB=O,!document.querySelector("#sponsorblock-document-script")){const e=document.createElement("div");e.id="sponsorblock-document-script",e.setAttribute("version",r.version),(document.head||document.documentElement).appendChild(e)}if(document.addEventListener("yt-player-updated",b),document.addEventListener("yt-navigate-start",E),document.addEventListener("yt-navigate-finish",S),"tv.youtube.com"===document.location.host&&(document.addEventListener("yt-navigate",S),document.addEventListener("ytu.app.lib.player.interaction-event",b),document.getElementById("#movie_player")&&(b({target:null===(l=document.getElementById("#movie_player"))||void 0===l?void 0:l.parentElement}),T())),(0,d.onMobile)()&&window.addEventListener("state-navigateend",S),a.YT_DOMAINS.includes(window.location.host)&&!(0,d.onMobile)()&&!(0,d.onYouTubeCableTV)())if(window.customElements){setTimeout((()=>{M||C()}),2e3);const e=window.customElements.define.bind(window.customElements);P.customElementDefine=e,Object.defineProperty(window.customElements,"define",{configurable:!0,enumerable:!1,writable:!0,value:(t,n,i)=>{let o=n;if(y.includes(t))if(M=!0,_&&(_.disconnect(),_=null),n.toString().startsWith("class")){class e extends n{constructor(){super(),w({type:"newElement",name:t})}}o=e}else o=function(){n.call(this),w({type:"newElement",name:t})},Object.setPrototypeOf(o.prototype,n.prototype),Object.setPrototypeOf(o,n);e(t,o,i)}})}else C();const c=window.fetch;P.browserFetch=c,window.fetch=(e,t=void 0)=>e instanceof Request&&p.some((t=>e.url.includes(t)))?(e.url.includes("/youtubei/v1/next")&&(setTimeout((()=>w({type:"newElement",name:""})),1e3),setTimeout((()=>w({type:"newElement",name:""})),2500),setTimeout((()=>w({type:"newElement",name:""})),8e3)),new Promise(((n,o)=>i(this,void 0,void 0,(function*(){try{const i=yield c(e,t),o=yield i.json();n(new Response(JSON.stringify(o),i)),L(o)}catch(e){o(e)}}))))):c(e,t);let m=0;const v={apply:(e,t,n)=>{if(n[0]&&n[0]!==window&&"number"==typeof n[0].start&&n[0].end&&"ssap"===n[0].namespace&&n[0].id){const e=n[0];if(e){const t=e.start;0!==t&&m!==t&&(m=t,w({type:"adDuration",duration:t/1e3}))}}return Reflect.apply(e,t,n)}};if(P.browserPush=window.Array.prototype.push,window.Array.prototype.push=new Proxy(window.Array.prototype.push,v),window.addEventListener("message",k),"undefined"!=typeof ytInitialData)L(ytInitialData);else{const e=setInterval((()=>{"undefined"!=typeof ytInitialData&&(L(ytInitialData),clearInterval(e))}),1);P.waitingInterval=e}setTimeout((()=>{setInterval.toString().includes("console.log(SCRIPTID, 'original interval:', interval, location.href)")&&alert('Warning: You have the user script "YouTube CPU Tamer". This causes performance issues with SponsorBlock, and does not actually improve CPU performance. Please uninstall this user script.')}),1e3)}},445:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resetLastArtworkSrc=t.resetMediaSessionThumbnail=t.setMediaSessionInfo=void 0;let n=null,i=null,o=null;function r(e){var t,r,d;"mediaSession"in navigator&&(o||(o={}),o=Object.assign(Object.assign({},o),e),(null===(d=null===(r=null===(t=navigator.mediaSession.metadata)||void 0===t?void 0:t.artwork)||void 0===r?void 0:r[0])||void 0===d?void 0:d.src)&&!navigator.mediaSession.metadata.artwork[0].src.includes("dearrow-thumb")&&(n=navigator.mediaSession.metadata.artwork[0].src),l(navigator.mediaSession.metadata,o)&&(a(o),i&&clearTimeout(i),i=setTimeout((()=>{o&&l(navigator.mediaSession.metadata,o)&&a(o),i=null}),500)))}function a(e){var t,n,i,o,r,a,l,d;if("mediaSession"in navigator){const s=Object.assign({},function(){var e,t,n,i,o,r,a,l,d,s;const u=Object.assign(Object.assign({},navigator.mediaSession.metadata),{artwork:[...null!==(t=null===(e=navigator.mediaSession.metadata)||void 0===e?void 0:e.artwork)&&void 0!==t?t:[]]});return void 0===u.title?{title:null!==(i=null===(n=navigator.mediaSession.metadata)||void 0===n?void 0:n.title)&&void 0!==i?i:"",artist:null!==(r=null===(o=navigator.mediaSession.metadata)||void 0===o?void 0:o.artist)&&void 0!==r?r:"",album:null!==(l=null===(a=navigator.mediaSession.metadata)||void 0===a?void 0:a.album)&&void 0!==l?l:"",artwork:[...null!==(s=null===(d=navigator.mediaSession.metadata)||void 0===d?void 0:d.artwork)&&void 0!==s?s:[]]}:u}());for(const t in e)s[t]=e[t];(null===(n=null===(t=s.artwork)||void 0===t?void 0:t[0])||void 0===n?void 0:n.src)&&(null===(o=null===(i=s.artwork)||void 0===i?void 0:i[0])||void 0===o?void 0:o.src)!==(null===(l=null===(a=null===(r=navigator.mediaSession.metadata)||void 0===r?void 0:r.artwork)||void 0===a?void 0:a[0])||void 0===l?void 0:l.src)&&((null===(d=s.title)||void 0===d?void 0:d.endsWith(" "))?s.title=s.title.trim():s.title=s.title+" "),navigator.mediaSession.metadata=new MediaMetadata(s)}}function l(e,t){if(e&&t)for(const n of Object.keys(t)){if("object"==typeof t[n]&&l(e[n],t[n]))return!0;if(e[n]!==t[n])return!0}return!1}t.setMediaSessionInfo=r,t.resetMediaSessionThumbnail=function(){var e,t,i;n&&r({title:null===(i=null!==(e=null==o?void 0:o.title)&&void 0!==e?e:null===(t=navigator.mediaSession.metadata)||void 0===t?void 0:t.title)||void 0===i?void 0:i.trim(),artwork:[{src:n}]})},t.resetLastArtworkSrc=function(){n=null}},705:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.onVideoPage=t.onYouTubeCableTV=t.onMobile=void 0,t.onMobile=function(){return"m.youtube.com"===window.location.hostname},t.onYouTubeCableTV=function(){return"tv.youtube.com"===window.location.hostname},t.onVideoPage=function(){return!!document.URL.match(/\/watch|\/shorts|\/live|\/embed/)}},395:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.getThumbnailSelectors=t.getThumbnailBoxSelectors=t.getThumbnailLink=t.getThumbnailImageSelectors=t.getThumbnailElementsToListenFor=t.getThumbnailElements=void 0;const i=n(705);function o(){return(0,i.onMobile)()?[".media-item-thumbnail-container",".video-thumbnail-container-compact","ytm-thumbnail-cover",".video-thumbnail-container-vertical","ytm-hero-playlist-thumbnail-renderer"]:["ytd-thumbnail","ytd-playlist-thumbnail","ytm-shorts-lockup-view-model","yt-thumbnail-view-model"]}function r(...e){return 0===e.length&&(e=[""]),o().map((t=>e.map((e=>`${t}${e}`)).join(", "))).join(", ")}t.getThumbnailElements=o,t.getThumbnailElementsToListenFor=function(){const e=o();return(0,i.onMobile)()||(e.push("yt-lockup-view-model"),e.push("ytm-shorts-lockup-view-model-v2")),e},t.getThumbnailImageSelectors=function(){return(0,i.onMobile)()?"img.video-thumbnail-img, img.amsterdam-playlist-thumbnail":"ytd-thumbnail:not([hidden]) img, ytd-playlist-thumbnail yt-image:not(.blurred-image) img, yt-img-shadow.ytd-hero-playlist-thumbnail-renderer img, ytm-shorts-lockup-view-model img, .yt-thumbnail-view-model__image img"},t.getThumbnailLink=function(e){return(0,i.onMobile)()?e.querySelector(["a.media-item-thumbnail-container","ytm-channel-featured-video-renderer a","a.compact-media-item-image","a.reel-item-endpoint",".amsterdam-playlist-thumbnail-wrapper a"].join(", ")):e.querySelector(r(" a"))},t.getThumbnailBoxSelectors=function(){return(0,i.onMobile)()?".media-item-thumbnail-container":r(":not([hidden])",".ytd-hero-playlist-thumbnail-renderer")},t.getThumbnailSelectors=r},291:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.versionHigher=void 0,t.versionHigher=function(e,t){const n=e.split("."),i=t.split(".");if(n.length!==i.length)return!0;for(let e=0;e<n.length;e++){const t=parseInt(n[e]),o=parseInt(i[e]);if(t>o)return!0;if(t<o)return!1}return!1}},303:e=>{e.exports={version:"1.1.48"}}},t={};(0,function n(i){var o=t[i];if(void 0!==o)return o.exports;var r=t[i]={exports:{}};return e[i].call(r.exports,r,r.exports,n),r.exports}(860).init)()})();