(()=>{"use strict";var e={83077:(e,t,r)=>{function n(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{A:()=>o});class o{constructor(e){n(this,"storeSlug",void 0),this.storeSlug=e.storeSlug,this.sessionStorage=e.sessionStorage,this.selectors=e.selectors;const t=document.querySelectorAll(this.selectors.cartItem);this.cartItems=Array.from(t??[])}getProductImage(e){if(!e)return"";const t=e.querySelector(this.selectors.productImage);return null!=t&&t.src?t.src:null}getProductName(e){if(!e)return null;const t=e.querySelector(this.selectors.productName);return null!=t&&t.textContent?t.textContent.trim():null}getProductPrice(e){var t,r;if(!e)return null;const n=e.querySelector(this.selectors.productPrice);return Number(null==n||null===(t=n.textContent)||void 0===t||null===(r=t.match(/\d+/g))||void 0===r?void 0:r.join(""))/100??null}getProductCategories(){throw new Error("getProductCategories method not implemented")}getProductQuantity(e){var t,r;if(!e)return null;const n=e.querySelector(this.selectors.productQuantity);return Number(null==n||null===(t=n.textContent)||void 0===t||null===(r=t.match(/\d+/g))||void 0===r?void 0:r.join(""))??null}async saveCartInfo(){const e=this.cartItems.map((e=>{const t=this.getProductName(e),r=this.getProductPrice(e),n=this.getProductCategories(e);return{productName:t,unitPrice:r,quantity:this.getProductQuantity(e),categories:n}}));this.sessionStorage.add({key:`${this.storeSlug}-cart-items`,value:e})}}}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=r(83077);class t{add(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{key:"",value:null,ttlMinutes:null};if(!e||null==e||!e.key)return;const{key:t,value:r,ttlMinutes:n}=e;return new Promise((e=>{chrome.runtime.sendMessage({action:"addSession",data:{key:t,value:r,ttlMinutes:n}},(()=>{e(null)}))}))}get(e){if(e)return new Promise((t=>{chrome.runtime.sendMessage({action:"getSession",data:{key:e}},(e=>{t(e)}))}))}remove(e){if(e)return new Promise((t=>{chrome.runtime.sendMessage({action:"removeSession",data:{key:e}},(()=>{t(null)}))}))}hasStoreInRememberList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"",slug:null};const{category:t,slug:r}=e||{};return!(!t||!r)&&new Promise((e=>{chrome.runtime.sendMessage({action:"storesFromRememberList",data:{category:t}},(t=>{e(t&&t.includes(r))}))}))}addStoreToRememberList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"",slug:""};const{category:t,slug:r}=e;if(t)return new Promise((e=>{chrome.runtime.sendMessage({action:"addStoreToRememberList",data:{category:t,slug:r}},(()=>e(null)))}))}removeStoreFromRememberList(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{category:"",slug:""};const{category:t,slug:r}=e;if(t)return new Promise((e=>{chrome.runtime.sendMessage({action:"removeStoreFromRememberList",data:{category:t,slug:r}},(()=>e(null)))}))}}class n extends(_("CartObserver")){constructor(e){super(e)}getProductCategories(e){if(!e)return null;const t=e.querySelector(this.selectors.productCategory),r=null==t?void 0:t.textContent,n=r?r.toLowerCase().replace("em","").trim():null;return n?[n]:[]}}function o(){try{if(r.g)return r.g}catch(e){try{if(window)return window}catch(e){return this}}}chrome.runtime.sendMessage({action:"getFeatureConfig",data:{feature:"cart-observer"}},(e=>{var t;const r=null==e?void 0:e.enabled,n=null==e||null===(t=e.selectors)||void 0===t?void 0:t.amazon;if(!r||!n)return;new(_("AmazonCartObserver"))({storeSlug:"amazon",sessionStorage:new(_("SessionStorage")),selectors:e.selectors.amazon}).saveCartInfo()}));var s=null;function u(){if(null===s){let e=o();e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__||(e.__$$GLOBAL_REWIRE_NEXT_MODULE_ID__=0),s=__$$GLOBAL_REWIRE_NEXT_MODULE_ID__++}return s}function i(){let e=o();return e.__$$GLOBAL_REWIRE_REGISTRY__||(e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)),e.__$$GLOBAL_REWIRE_REGISTRY__}function c(){let e=u(),t=i(),r=t[e];return r||(t[e]=Object.create(null),r=t[e]),r}!function(){let e=o();e.__rewire_reset_all__||(e.__rewire_reset_all__=function(){e.__$$GLOBAL_REWIRE_REGISTRY__=Object.create(null)})}();var l="__INTENTIONAL_UNDEFINED__";let a={};function _(r){let o=c();if(void 0===o[r])return function(r){switch(r){case"CartObserver":return e.A;case"AmazonCartObserver":return n;case"SessionStorage":return t}return}(r);var s=o[r];return s===l?void 0:s}function d(e,t){let r=c();return"object"==typeof e?(Object.keys(e).forEach((function(t){r[t]=e[t]})),function(){Object.keys(e).forEach((function(t){g(e)}))}):(r[e]=void 0===t?l:t,function(){g(e)})}function g(e){let t=c();delete t[e],0==Object.keys(t).length&&delete i()[u]}function m(e){let t=c();var r=Object.keys(e),n={};function o(){r.forEach((function(e){t[e]=n[e]}))}return function(s){r.forEach((function(r){n[r]=t[r],t[r]=e[r]}));let u=s();return u&&"function"==typeof u.then?u.then(o).catch(o):o(),u}}!function(){function e(e,t){Object.defineProperty(a,e,{value:t,enumerable:!1,configurable:!0})}e("__get__",_),e("__GetDependency__",_),e("__Rewire__",d),e("__set__",d),e("__reset__",g),e("__ResetDependency__",g),e("__with__",m)}()})()})();